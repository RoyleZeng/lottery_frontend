# 抽獎動畫功能說明

## 更新日期

2024 年 11 月

## 功能概述

為抽獎系統添加了生動的動畫效果，讓抽獎過程更加有趣和吸引人。當用戶點擊「開始抽獎」按鈕時，會彈出一個全屏動畫弹窗，展示整個抽獎過程。

## 🎬 **動畫流程**

### 1. **準備階段 (Preparing Stage)**

- **持續時間：** 1 秒
- **視覺效果：**
  - 🎲 骰子圖標
  - "準備抽獎中..." 文字
  - 三個跳動的點點載入動畫
- **背景：** 紫色漸層背景 + 旋轉光暈效果

### 2. **抽獎階段 (Drawing Stage)**

- **持續時間：** 每個獎項 2 秒 + 0.5 秒間隔
- **視覺效果：**
  - 🎯 旋轉的目標圖標
  - "正在抽取獎項" 標題
  - 當前獎項名稱高亮顯示
  - 隨機跳動的學號/ID 號碼
  - 四個閃爍的星星特效
- **動畫細節：**
  - 學號以每 50 毫秒的頻率快速變換
  - 最多同時顯示 5 個隨機學號
  - 背景星星效果營造抽獎氛圍

### 3. **完成階段 (Completed Stage)**

- **持續時間：** 3 秒後自動關閉
- **視覺效果：**
  - 🎉 彈跳慶祝圖標
  - "抽獎完成！" 標題
  - 各獎項中獎結果摘要
  - 自動關閉倒數提示

## 🎨 **設計特色**

### 視覺設計

- **背景：** 深紫色漸層 (#667eea → #764ba2)
- **光暈效果：** 旋轉的徑向漸層光圈
- **毛玻璃效果：** backdrop-filter 模糊背景
- **陰影效果：** 深度陰影增強立體感

### 動畫效果

- **旋轉動畫：** 圖標持續旋轉
- **彈跳動畫：** 慶祝圖標上下彈跳
- **閃爍動畫：** 載入點點和星星特效
- **縮放動畫：** 數字卡片的閃現效果
- **淡入淡出：** 自動關閉提示的呼吸燈效果

### 響應式設計

- **桌面版：** 600px 寬度，完整動畫效果
- **移動版：** 適應螢幕寬度，縮小字體和圖標

## 🔧 **技術實現**

### Vue.js 響應式變量

```javascript
const showLotteryModal = ref(false); // 控制弹窗显示
const lotteryAnimationStage = ref("preparing"); // 动画阶段
const animatedNumbers = ref([]); // 动画数字
const currentPrize = ref(""); // 当前奖项
const lotteryResults = ref([]); // 抽奖结果
```

### 動畫序列控制

```javascript
// 主要流程
1. 显示弹窗 → 准备阶段 (1秒)
2. 进入抽奖阶段 → 逐个奖项动画 (每个2秒)
3. 执行实际抽奖API
4. 显示完成阶段 (3秒后自动关闭)
```

### CSS 動畫關鍵幀

- `@keyframes rotate` - 背景光圈旋轉
- `@keyframes spin` - 圖標旋轉
- `@keyframes bounce` - 彈跳效果
- `@keyframes dot-pulse` - 載入點點動畫
- `@keyframes number-flash` - 數字閃現
- `@keyframes sparkle` - 星星閃爍
- `@keyframes fade-pulse` - 淡入淡出呼吸燈

## 🎯 **用戶體驗提升**

### 心理效果

1. **期待感：** 準備階段建立用戶期待
2. **參與感：** 跳動數字讓用戶感受抽獎過程
3. **成就感：** 完成階段的慶祝效果
4. **透明度：** 清楚顯示每個獎項的抽取過程

### 交互優化

1. **非阻塞：** 動畫期間用戶可以觀看但無法操作
2. **自動關閉：** 避免用戶需要手動關閉弹窗
3. **視覺反饋：** 每個階段都有明確的視覺標識
4. **進度指示：** 通過獎項名稱顯示當前進度

## 📱 **跨平台兼容性**

### 桌面瀏覽器

- ✅ Chrome/Edge/Safari/Firefox
- ✅ 完整動畫效果支持
- ✅ 毛玻璃背景效果

### 移動設備

- ✅ iOS Safari/Chrome
- ✅ Android Chrome/Firefox
- ✅ 響應式布局適配
- ⚠️ 部分老舊設備可能動畫較慢

## 🔄 **與現有功能的整合**

### 保持原有功能

- ✅ 抽獎邏輯完全不變
- ✅ API 調用流程不變
- ✅ 結果顯示方式不變
- ✅ 錯誤處理機制不變

### 增強用戶體驗

- 🎯 視覺化抽獎過程
- 🎉 增加儀式感和趣味性
- 📊 實時顯示抽獎進度
- ⏱️ 合理的動畫時長控制

## 🚀 **性能優化**

### 動畫性能

- 使用 CSS transform 而非 position 變化
- 合理控制動畫頻率 (50ms/幀)
- 避免過多同時運行的動畫
- 自動清理定時器防止內存洩漏

### 資源管理

- 純 CSS 動畫，無需額外資源
- 響應式設計減少重複代碼
- 條件渲染避免不必要的 DOM 元素

## 🔮 **未來擴展可能性**

### 音效支持

- 添加抽獎音效 (滾動聲、中獎鈴聲)
- 背景音樂支持
- 音量控制選項

### 自定義動畫

- 允許用戶選擇動畫主題
- 不同的動畫速度設置
- 更多圖標和顏色選項

### 高級特效

- 粒子效果系統
- 3D 動畫效果
- 更豐富的過渡動畫

### 數據可視化

- 實時統計圖表
- 中獎機率顯示
- 歷史抽獎記錄動畫

## 📝 **使用說明**

### 觸發動畫

1. 確保已設置獎項和參與者
2. 點擊「開始抽獎」按鈕
3. 自動彈出動畫弹窗
4. 觀看完整抽獎過程
5. 3 秒後自動關閉，查看詳細結果

### 動畫控制

- **無法中斷：** 動畫開始後會自動完成整個流程
- **自動關閉：** 完成階段會在 3 秒後自動關閉
- **響應式：** 在不同設備上都有良好表現

### 注意事項

- 抽獎期間請勿刷新頁面
- 確保網絡連接穩定
- 建議在現代瀏覽器中使用以獲得最佳效果
